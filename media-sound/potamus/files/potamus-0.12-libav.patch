--- potamus-0.12/src/input-avcodec.c
+++ potamus-0.12.orig/src/input-avcodec.c
@@ -69,7 +69,7 @@ static int input_avcodec_open(input *p,
 
 		for (int i = 0; i < a->format->nb_streams; i++) {
 			AVCodecContext *ctx = a->format->streams[i]->codec;
-			if (ctx->codec_type == CODEC_TYPE_AUDIO) {
+			if (ctx->codec_type == AVMEDIA_TYPE_AUDIO) {
 				a->stream = i;
 				a->codec_ctx = ctx;
 			}

